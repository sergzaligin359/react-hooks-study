import React, {useEffect} from 'react';
import {Link} from 'react-router-dom';
import { ErrorMsg, Loading } from 'components';
import { useFetch } from 'hooks';

export const PopularTags = () => {

    const [{response, isLoading, error}, fetchTags] = useFetch('tags');

    useEffect(() => {
        fetchTags();
    }, [fetchTags]);

    if (isLoading || !response) {
        return <Loading />
    }
    
    if (error) {
        return <ErrorMsg />
    }

    return (
    <div className="sidebar">
      <p>Popular tags</p>
      <div className="tag-list">
        {response.tags.map(tag => (
          <Link to={`/tags/${tag}`} className="tag-default tag-pill" key={tag}>
            {tag}
          </Link>
        ))}
      </div>
    </div>
    )
}
